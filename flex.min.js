!function(t){"use strict";function e(){for(var t in this.constructor.prototype)"constructor"!==t&&o(this[t])&&(this[t]=u.createAction(t,this[t]))}function n(){this.initialState||(this.initialState={}),this.__controller__=c.controlSync(),this.__state__={},this.set(this.getInitialState())}function i(t){if(!r(t)&&!o(t))return t;for(var e=1;e<arguments.length;){var n=arguments[e++];for(var i in n)if(n.hasOwnProperty(i))if(Object.getOwnPropertyDescriptor&&Object.defineProperty){var s=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,s||{})}else t[i]=n[i]}return t}function r(t){return t&&"object"==typeof t}function o(t){return t&&"function"==typeof t}function s(t){return t&&"string"==typeof t}var a,c,u={};"function"==typeof define&&define.amd?define(["davy","streamlet"],function(t,e){return a=t,c=e,u}):"object"==typeof module&&module.exports?(a=require("davy"),c=require("streamlet"),module.exports=u):(a=t.Davy,c=t.Streamlet,t.Flex=u),u.createStore=function(t){return o(t)?(i(t.prototype,n.prototype),t=new t):(t=i(new n,t),o(t.initialize)&&t.initialize.call(t)),n.call(t),t},u.createAction=function(t,e){o(e)||(e=function(t){return t});var n=c.controlSync(),r=n.stream,s=function(t){return n.next(t),t},u=function(t){throw n.fail(t),t},f=function(){var t=arguments,n=this;return new a(function(i){i(e.apply(n,t))}).then(s,u)},p={actionName:t,listen:function(t,e){return r.listen(t,e)},set:s};return i(f,p)},u.createActions=function(t,n){n||(n="");var a={};if(o(t))i(t.prototype,e.prototype),a=new t;else for(var c in t)if(t.hasOwnProperty(c)){var u=t[c],f=s(u)?u:c,p=n+f;if(r(u)){var l=u.$;delete u.$,a[f]=i(this.createAction(p,l),this.createActions(u,p))}else a[f]=this.createAction(p,u)}return a},u.save=u.saveState=function(t){return JSON.stringify(t.get())},u.restore=u.restoreState=function(t,e){t.set(r(e)?e:JSON.parse(e))},u.Promise=a,u.Observable=c,u.Store=n,u.Actions=e,u.ListenerMixin={componentWillMount:function(){this.subscriptions=[]},componentWillUnmount:function(){for(var t=0;t<this.subscriptions.length;)this.subscriptions[t++]()},listenTo:function(t,e){this.subscriptions.push(t.listen(e))}},n.prototype.getInitialState=function(){return JSON.parse(JSON.stringify(this.initialState||{}))},n.prototype.get=n.prototype.getState=function(){return this.__state__},n.prototype.set=n.prototype.setState=function(t){return r(t)?(i(this.__state__,t),this.__controller__.add(t),this.__state__):void 0},n.prototype.reset=n.prototype.resetState=function(){return this.__state__={},this.set(this.getInitialState())},n.prototype.listen=function(t){return this.__controller__.stream.listen(t)},n.prototype.listenTo=function(t,e,n){if(o(t)&&s(t.actionName)){var i=t.actionName;i=i[0].toUpperCase()+i.slice(1),e=e||this["on"+i],n=n||this["on"+i+"Fail"],(o(e)||o(n))&&t.listen(e&&e.bind(this),n&&n.bind(this))}if(1===arguments.length&&(o(t)||r(t)))for(var a in t)t.hasOwnProperty(a)&&this.listenTo(t[a])}}(this);
//# sourceMappingURL=flex.min.js.map