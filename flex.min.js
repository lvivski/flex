!function(t){"use strict";function e(){this.controller=u.create(this),this.state={}}function n(t){if(!r(t)&&!i(t))return t;for(var e=0;e<arguments.length;){var n=arguments[e++];for(var o in n)t[o]=n[o]}return t}function r(t){return t&&"object"==typeof t}function i(t){return t&&"function"==typeof t}function o(t){return t&&"string"==typeof t}var s,u,a={};"function"==typeof define&&define.amd?define(["davy","streamlet"],function(t,e){return s=t,u=e,a}):"object"==typeof module&&module.exports?(s=require("davy"),u=require("streamlet"),module.exports=a):(s=t.Davy,u=t.Streamlet,t.Flex=a),a.createStore=function(t){var r=n(new e,t);return i(t.initialize)&&t.initialize.call(r),r},a.createAction=function(t,e){i(e)||(e=function(t){return t});var r=u.create(!0),o=r.stream,a=function(t){return new s(function(n){n(e(t))}).then(function(t){return r.next(t),t},function(t){throw r.fail(t),t})},c={actionName:t,listen:function(){o.listen.apply(o,arguments)}};return n(a,c)},a.createActions=function(t,e){e||(e="");var i={};for(var s in t)if(t.hasOwnProperty(s)){var u=t[s],a=o(u)?u:s,c=e+a;if(r(u)){var f=u.$;delete u.$,i[a]=n(this.createAction(c,f),this.createActions(u,c))}else i[a]=this.createAction(c,u)}return i},a.saveState=function(t){return JSON.stringify(t.state)},a.restoreState=function(t,e){t.emit(r(e)?e:JSON.parse(e))},a.Promise=s,a.Stream=u,a.Store=e,a.ListenerMixin={componentWillMount:function(){this.subscriptions=[]},componentWillUnmount:function(){for(var t=0;t<this.subscriptions.length;)this.subscriptions[t++]()},listenTo:function(t,e){this.subscriptions.push(t.listen(e))}},e.prototype.get=e.prototype.getState=function(){return this.state},e.prototype.emit=e.prototype.set=e.prototype.setState=function(t){for(var e in t)t.hasOwnProperty(e)&&(this.state[e]=t[e]);return this.controller.add(t)},e.prototype.clear=e.prototype.clearState=function(){return this.state={},this.controller.add(this.state)},e.prototype.listen=function(t){return this.controller.stream.listen(t)},e.prototype.listenTo=function(t,e,n){return i(e)&&(e=e.bind(this)),i(n)&&(n=n.bind(this)),t.listen(e,n)}}(this);
//# sourceMappingURL=flex.min.js.map