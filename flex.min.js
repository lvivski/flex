!function(t){"use strict";function e(){this.initialState||(this.initialState={}),this[p]=u.controlSync(),this[f]={},this.set(this.getInitialState())}function n(t){if(!i(t)&&!r(t))return t;for(var e=1;e<arguments.length;){var n=arguments[e++];for(var o in n)if(n.hasOwnProperty(o))if(Object.getOwnPropertyDescriptor&&Object.defineProperty){var s=Object.getOwnPropertyDescriptor(n,o);Object.defineProperty(t,o,s||{})}else t[o]=n[o]}return t}function i(t){return t&&"object"==typeof t}function r(t){return t&&"function"==typeof t}function o(t){return t&&"string"==typeof t}function s(t){return function(e){return function(){return t(e)}}}var a,u,c={};"function"==typeof define&&define.amd?define(["davy","streamlet"],function(t,e){return a=t,u=e,c}):"object"==typeof module&&module.exports?(a=require("davy"),u=require("streamlet"),module.exports=c):(a=t.Davy,u=t.Streamlet,t.Flex=c),c.createStore=function(t){return r(t)?(n(t.prototype,e.prototype),t=new t):(t=n(new e,t),r(t.initialize)&&t.initialize.call(t)),e.call(t),t},c.createAction=function(t,e){r(e)||(e=function(t){return t});var i=u.controlSync(),o=i.stream,c=function(t){return i.next(t),t},f=function(t){throw i.fail(t),t},p=function(t){return new a(function(n){n(e(t))}).then(c,f).then(s(c),s(f))},l={actionName:t,listen:function(){o.listen.apply(o,arguments)}};return n(p,l)},c.createActions=function(t,e){e||(e="");var s={};r(t)&&(t=new t);for(var a in t)if(t.hasOwnProperty(a)){var u=t[a],c=o(u)?u:a,f=e+c;if(i(u)){var p=u.$;delete u.$,s[c]=n(this.createAction(f,p),this.createActions(u,f))}else s[c]=this.createAction(f,u)}return s},c.save=c.saveState=function(t){return JSON.stringify(t.get())},c.restore=c.restoreState=function(t,e){t.set(i(e)?e:JSON.parse(e))},c.Promise=a,c.Observable=u,c.Store=e,c.ListenerMixin={componentWillMount:function(){this.subscriptions=[]},componentWillUnmount:function(){for(var t=0;t<this.subscriptions.length;)this.subscriptions[t++]()},listenTo:function(t,e){this.subscriptions.push(t.listen(e))}};var f="__state"+Math.random()+"__",p="__controller"+Math.random()+"__";Object.defineProperty(u.prototype,f,{configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u.prototype,p,{configurable:!0,writable:!0,value:void 0}),e.prototype.getInitialState=function(){return JSON.parse(JSON.stringify(this.initialState||{}))},e.prototype.get=e.prototype.getState=function(){return this[f]},e.prototype.set=e.prototype.setState=function(t){return i(t)?(n(this[f],t),this[p].add(t),this[f]):void 0},e.prototype.reset=e.prototype.resetState=function(){return this[f]={},this.set(this.getInitialState())},e.prototype.listen=function(t){return this[p].stream.listen(t)},e.prototype.listenTo=function(t,e,n){if(r(t)&&o(t.actionName)){var s=t.actionName;s=s[0].toUpperCase()+s.slice(1),e=e||this["on"+s],n=n||this["on"+s+"Fail"],(r(e)||r(n))&&t.listen(e&&e.bind(this),n&&n.bind(this))}if(1===arguments.length&&(r(t)||i(t)))for(var a in t)t.hasOwnProperty(a)&&this.listenTo(t[a])}}(this);
//# sourceMappingURL=flex.min.js.map