!function(t){"use strict";function e(){}function i(){for(var t in this.constructor.prototype)"constructor"!==t&&a(this[t])&&(this[t]=e.createAction(t,this[t]))}function r(){this.initialState||(this.initialState={}),this.__controller__=p.control(!0),this.__state__={},this.set(this.getInitialState())}function o(t){if(!s(t)&&!a(t))return t;for(var e=1;e<arguments.length;){var n=arguments[e++];for(var i in n)if(n.hasOwnProperty(i))if(Object.getOwnPropertyDescriptor&&Object.defineProperty){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r||{})}else t[i]=n[i]}return t}function s(t){return t&&"object"==typeof t}function a(t){return t&&"function"==typeof t}function c(t){return t&&"string"==typeof t}function u(t){return n}var f,p;"function"==typeof define&&define.amd?define(["davy","streamlet"],function(t,n){return f=t,p=n,e}):"object"==typeof module&&module.exports?(f=require("davy"),p=require("streamlet"),module.exports=e):(f=t.Davy,p=t.Streamlet,t.Flex=e),e.createStore=function(t){return a(t)?(o(t.prototype,r.prototype),t=new t):(t=o(new r,t),a(t.initialize)&&t.initialize.call(t)),r.call(t),t},e.createAction=function(t,e){a(e)||(e=u);var n=p.control(!0),i=n.stream,r=function(t){return n.next(t),t},s=function(t){throw n.fail(t),t},c=function(){var t=arguments,n=this;return new f(function(i){i(e.apply(n,t))}).then(r,s)},l={actionName:t,listen:function(t,e){return i.listen(t,e)}};return o(c,l)},e.createActions=function(t,e){e||(e="");var n={};if(a(t))o(t.prototype,i.prototype),n=new t;else for(var r in t)if(t.hasOwnProperty(r)){var u=t[r],f=c(u)?u:r,p=e+f;if(s(u)){var l=u.$;delete u.$,n[f]=o(this.createAction(p,l),this.createActions(u,p))}else n[f]=this.createAction(p,u)}return n},e.save=e.saveState=function(t){return JSON.stringify(t.get())},e.restore=e.restoreState=function(t,e){t.set(s(e)?e:JSON.parse(e))},e.replay=e.replayActions=function(t){return f.all(t)},e.Promise=f,e.Observable=p,e.Store=r,e.Actions=i,e.ListenerMixin={componentWillMount:function(){this.subscriptions=[]},componentWillUnmount:function(){for(var t=0;t<this.subscriptions.length;)this.subscriptions[t++]()},listenTo:function(t,e){this.subscriptions.push(t.listen(e))}},r.prototype.getInitialState=function(){return JSON.parse(JSON.stringify(this.initialState||{}))},r.prototype.get=r.prototype.getState=function(){return this.__state__},r.prototype.set=r.prototype.setState=function(t){return s(t)?(o(this.__state__,t),this.__controller__.add(t),this.__state__):void 0},r.prototype.reset=r.prototype.resetState=function(){return this.__state__={},this.set(this.getInitialState())},r.prototype.listen=function(t){return this.__controller__.stream.listen(t)},r.prototype.listenTo=function(t,e,n){if(a(t)&&c(t.actionName)){var i=t.actionName;i=i[0].toUpperCase()+i.slice(1),e=e||this["on"+i],n=n||this["on"+i+"Fail"],(a(e)||a(n))&&t.listen(e&&e.bind(this),n&&n.bind(this))}if(1===arguments.length&&(a(t)||s(t)))for(var r in t)t.hasOwnProperty(r)&&this.listenTo(t[r])}}(this);
//# sourceMappingURL=flex.min.js.map